<!DOCTYPE html><html><head><title>Ubaid Shaikh</title><meta name="description" content="This is Ubaid Shaikh&#x27;s portfolio Website"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta charSet="UTF-8"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/842215169d42b9bb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/842215169d42b9bb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-e7a7892cb0edc024.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c27499bb138bb451.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-8d0d04d2d87907dd.js" defer=""></script><script src="/_next/static/nQpbjK9f3bUKgOXUdtNik/_buildManifest.js" defer=""></script><script src="/_next/static/nQpbjK9f3bUKgOXUdtNik/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><label tabindex="0" class="btn btn-ghost lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></label><ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52"><li><a href="/posts">Posts</a></li><li><a href="/contact">Contact</a></li></ul></div><span class="btn btn-ghost normal-case"><img src="/ubaid_shaikh_logo.svg" alt="logo" height="100%" width="200"/></span></div><div class="navbar-end hidden lg:flex"><ul class="menu menu-horizontal p-0"><li><a href="/posts">Posts</a></li><li><a href="/contact">Contact</a></li></ul></div></div><div class="flex place-content-center"><div class="w-4/5"><br/><div class="link"><i class="ri-arrow-left-line"></i> Back to posts</div><br/><article class="prose prose-lg md:prose-xl"><h1>NodeJS Testing Infrastructure and Supporting Basic If-Else</h1><h3>GSoC 22: Blog 5</h3><div class="flex justify-between"><div><i class="ri-calendar-2-line"></i> <!-- -->July 1, 2022</div><div><i class="ri-time-line"></i> <!-- -->3 min read</div></div></article><hr class="mt-5 mb-8"/><div class="w-3/4 w-full m-auto"><article class="prose prose-base"><div class="blog-content md:text-lg"><h1 id="hey-there-ðŸ¤—-welcome-to-my-gsoc-journey">Hey there ðŸ¤—, Welcome to my GSoC Journey</h1>
<p>This is a series of blogs that I am writing to share my amazing <strong>GSoC 22</strong> (Google Summer of Code 2022) Journey with you all. </p>
<hr>
<h1 id="nodejs-testing-infrastructure-and-supporting-basic-if-else">NodeJS Testing Infrastructure and Supporting Basic If-Else</h1>
<p>This week's work mostly comprises of the following in the <code>LFortran</code> <code>WASM</code> Backend:  </p>
<ul>
<li>basic support for <code>integration_tests</code> using <code>nodejs</code></li>
<li>basic support for <code>if-else</code> statements</li>
<li>minor improvements</li>
</ul>
<p>In this week, a fun/interesting part was to figure out the basic implementation for <code>wasm</code> <code>if-else</code> statements.
As per the <a href="https://webassembly.github.io/spec/core/binary/instructions.html#control-instructions">WebAssembly docs</a>, 
it seemed that the <code>wasm</code> <code>if-else</code> instruction requires a <code>type/signature</code>.
This <code>type/signature</code> consists of the <code>parameter</code> types (the types that would be present on the <code>stack</code> just before the execution of the <code>if-else</code>)
and the <code>result</code> types (the types that would be present on the <code>stack</code> just after the execution of the <code>if-else</code>).
This <code>type/signature</code> is not readily available in our <code>ASR</code>, 
and we had two ideas for obtaining this <code>type/signature</code> of the <code>wasm</code> <code>if-else</code> instruction:</p>
<ol>
<li>Writing a <code>visitor</code> function that would return us the <code>parameter</code> and <code>result</code> types necessary for the <code>wasm</code> <code>if-else</code> instruction.</li>
<li>Using a <code>stack</code> variable in the <code>ASR-&gt;WASM</code> Backend that keeps track of the types currently present in the function's <code>stack</code>. 
So, just before and after the <code>if-else</code> we can quickly look up the <code>stack</code> variable and get the <code>parameter</code> and <code>result</code> types respectively.</li>
</ol>
<p>During the basic implementation of <code>if-else</code>, I realized the we might not need the <code>parameter</code> and <code>result</code> types as, in most of the cases,
<code>if-else</code> do not consume any value and do not return any value. Thus, an emtpy/epsilon type should also work.
So, currently, I implemented the basic version of <code>if-else</code> statements without their <code>type/signature</code>.
Hopefully, it works. We will update the implementation, if in case there is any issue in the future.</p>
<p>This phase was mostly/approximately from <code>25-06-2022</code> to <code>01-07-2022</code>.</p>
<p>The MRs during this phase are as follows:</p>
<ul>
<li><a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1808">!1808 WASM: NodeJS Testing Infrastructure</a></li>
<li><a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1809">!1809 WASM: WASM: Add support for basic If-Else</a></li>
<li><a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1810">!1810 WASM: Minor Improvements</a></li>
<li><a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1811">!1811 WASM: Suggested Minor Refactor</a></li>
</ul>
<p>Upcoming Tasks:</p>
<ul>
<li>NodeJS testing for <code>CI</code>: <a href="https://gitlab.com/lfortran/lfortran/-/issues/712">#712</a>, and this <a href="https://gitlab.com/lfortran/lfortran/-/merge_requests/1808#note_1012029577">comment</a></li>
<li>Improve support for <code>if-else</code> statements</li>
</ul>
<hr>
<p>That's all for this blog. Thank you for your time. We continue this series in the next blog.</p>
</div></article></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blog":{"content":"\u003ch1 id=\"hey-there-ðŸ¤—-welcome-to-my-gsoc-journey\"\u003eHey there ðŸ¤—, Welcome to my GSoC Journey\u003c/h1\u003e\n\u003cp\u003eThis is a series of blogs that I am writing to share my amazing \u003cstrong\u003eGSoC 22\u003c/strong\u003e (Google Summer of Code 2022) Journey with you all. \u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"nodejs-testing-infrastructure-and-supporting-basic-if-else\"\u003eNodeJS Testing Infrastructure and Supporting Basic If-Else\u003c/h1\u003e\n\u003cp\u003eThis week's work mostly comprises of the following in the \u003ccode\u003eLFortran\u003c/code\u003e \u003ccode\u003eWASM\u003c/code\u003e Backend:  \u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ebasic support for \u003ccode\u003eintegration_tests\u003c/code\u003e using \u003ccode\u003enodejs\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003ebasic support for \u003ccode\u003eif-else\u003c/code\u003e statements\u003c/li\u003e\n\u003cli\u003eminor improvements\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eIn this week, a fun/interesting part was to figure out the basic implementation for \u003ccode\u003ewasm\u003c/code\u003e \u003ccode\u003eif-else\u003c/code\u003e statements.\nAs per the \u003ca href=\"https://webassembly.github.io/spec/core/binary/instructions.html#control-instructions\"\u003eWebAssembly docs\u003c/a\u003e, \nit seemed that the \u003ccode\u003ewasm\u003c/code\u003e \u003ccode\u003eif-else\u003c/code\u003e instruction requires a \u003ccode\u003etype/signature\u003c/code\u003e.\nThis \u003ccode\u003etype/signature\u003c/code\u003e consists of the \u003ccode\u003eparameter\u003c/code\u003e types (the types that would be present on the \u003ccode\u003estack\u003c/code\u003e just before the execution of the \u003ccode\u003eif-else\u003c/code\u003e)\nand the \u003ccode\u003eresult\u003c/code\u003e types (the types that would be present on the \u003ccode\u003estack\u003c/code\u003e just after the execution of the \u003ccode\u003eif-else\u003c/code\u003e).\nThis \u003ccode\u003etype/signature\u003c/code\u003e is not readily available in our \u003ccode\u003eASR\u003c/code\u003e, \nand we had two ideas for obtaining this \u003ccode\u003etype/signature\u003c/code\u003e of the \u003ccode\u003ewasm\u003c/code\u003e \u003ccode\u003eif-else\u003c/code\u003e instruction:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eWriting a \u003ccode\u003evisitor\u003c/code\u003e function that would return us the \u003ccode\u003eparameter\u003c/code\u003e and \u003ccode\u003eresult\u003c/code\u003e types necessary for the \u003ccode\u003ewasm\u003c/code\u003e \u003ccode\u003eif-else\u003c/code\u003e instruction.\u003c/li\u003e\n\u003cli\u003eUsing a \u003ccode\u003estack\u003c/code\u003e variable in the \u003ccode\u003eASR-\u0026gt;WASM\u003c/code\u003e Backend that keeps track of the types currently present in the function's \u003ccode\u003estack\u003c/code\u003e. \nSo, just before and after the \u003ccode\u003eif-else\u003c/code\u003e we can quickly look up the \u003ccode\u003estack\u003c/code\u003e variable and get the \u003ccode\u003eparameter\u003c/code\u003e and \u003ccode\u003eresult\u003c/code\u003e types respectively.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eDuring the basic implementation of \u003ccode\u003eif-else\u003c/code\u003e, I realized the we might not need the \u003ccode\u003eparameter\u003c/code\u003e and \u003ccode\u003eresult\u003c/code\u003e types as, in most of the cases,\n\u003ccode\u003eif-else\u003c/code\u003e do not consume any value and do not return any value. Thus, an emtpy/epsilon type should also work.\nSo, currently, I implemented the basic version of \u003ccode\u003eif-else\u003c/code\u003e statements without their \u003ccode\u003etype/signature\u003c/code\u003e.\nHopefully, it works. We will update the implementation, if in case there is any issue in the future.\u003c/p\u003e\n\u003cp\u003eThis phase was mostly/approximately from \u003ccode\u003e25-06-2022\u003c/code\u003e to \u003ccode\u003e01-07-2022\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThe MRs during this phase are as follows:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://gitlab.com/lfortran/lfortran/-/merge_requests/1808\"\u003e!1808 WASM: NodeJS Testing Infrastructure\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gitlab.com/lfortran/lfortran/-/merge_requests/1809\"\u003e!1809 WASM: WASM: Add support for basic If-Else\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gitlab.com/lfortran/lfortran/-/merge_requests/1810\"\u003e!1810 WASM: Minor Improvements\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gitlab.com/lfortran/lfortran/-/merge_requests/1811\"\u003e!1811 WASM: Suggested Minor Refactor\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eUpcoming Tasks:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eNodeJS testing for \u003ccode\u003eCI\u003c/code\u003e: \u003ca href=\"https://gitlab.com/lfortran/lfortran/-/issues/712\"\u003e#712\u003c/a\u003e, and this \u003ca href=\"https://gitlab.com/lfortran/lfortran/-/merge_requests/1808#note_1012029577\"\u003ecomment\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eImprove support for \u003ccode\u003eif-else\u003c/code\u003e statements\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eThat's all for this blog. Thank you for your time. We continue this series in the next blog.\u003c/p\u003e\n","frontmatter":{"slug":"gsoc_5_nodejs_testing_and_basic_if_else","excerpt":"GSoC 22: Blog 5","title":"NodeJS Testing Infrastructure and Supporting Basic If-Else","publishedAt":"2022-07-01","day":"July 1, 2022","readingTime":"3 min read"}}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"gsoc_5_nodejs_testing_and_basic_if_else"},"buildId":"nQpbjK9f3bUKgOXUdtNik","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>