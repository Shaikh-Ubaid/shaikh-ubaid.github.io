<!DOCTYPE html><html><head><title>Ubaid Shaikh</title><meta name="description" content="This is Ubaid Shaikh&#x27;s portfolio Website"/><link rel="icon" href="/favicon.ico"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta charSet="UTF-8"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/842215169d42b9bb.css" as="style"/><link rel="stylesheet" href="/_next/static/css/842215169d42b9bb.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-59c5c889f52620d6.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-e7a7892cb0edc024.js" defer=""></script><script src="/_next/static/chunks/pages/_app-c27499bb138bb451.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-8d0d04d2d87907dd.js" defer=""></script><script src="/_next/static/lE1siw_OhgDfFYiWhLfI-/_buildManifest.js" defer=""></script><script src="/_next/static/lE1siw_OhgDfFYiWhLfI-/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div class="navbar bg-base-100"><div class="navbar-start"><div class="dropdown"><label tabindex="0" class="btn btn-ghost lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path></svg></label><ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52"><li><a href="/posts">Posts</a></li><li><a href="/contact">Contact</a></li></ul></div><span class="btn btn-ghost normal-case"><img src="/ubaid_shaikh_logo.svg" alt="logo" height="100%" width="200"/></span></div><div class="navbar-end hidden lg:flex"><ul class="menu menu-horizontal p-0"><li><a href="/posts">Posts</a></li><li><a href="/contact">Contact</a></li></ul></div></div><div class="flex place-content-center"><div class="w-4/5"><br/><div class="link"><i class="ri-arrow-left-line"></i> Back to posts</div><br/><article class="prose prose-lg md:prose-xl"><h1>Supporting Multi-Dimensional Arrays and WASM Testing at CI</h1><h3>GSoC 22: Blog 10</h3><div class="flex justify-between"><div><i class="ri-calendar-2-line"></i> <!-- -->August 5, 2022</div><div><i class="ri-time-line"></i> <!-- -->2 min read</div></div></article><hr class="mt-5 mb-8"/><div class="w-3/4 w-full m-auto"><article class="prose prose-base"><div class="blog-content md:text-lg"><h1 id="hey-there-ðŸ¤—-welcome-to-my-gsoc-journey">Hey there ðŸ¤—, Welcome to my GSoC Journey</h1>
<p>This is a series of blogs that I am writing to share my amazing <strong>GSoC 22</strong> (Google Summer of Code 2022) Journey with you all.</p>
<hr>
<h1 id="supporting-multi-dimensional-arrays-and-wasm-testing-at-ci">Supporting Multi-Dimensional Arrays and WASM Testing at CI</h1>
<p>During this week, I worked on adding support for <code>Mult-Dimensional Arrays</code> in the <code>WebAssembly</code> Backend.
I also worked on supporting <code>integration tests</code> <code>testing</code> for <code>WASM</code> at the <code>CI</code>.</p>
<p>One of the challeges in this week was to figure out passing of the <code>dimensional</code> information of <code>arrays</code>
during <code>function</code>/<code>subroutine</code> calls.
It seems, one of the possible ways to do so is to use/implement <code>array descriptor</code> support in the <code>WebAssembly</code> Backend.
I tried supporting the <code>array descriptor</code> idea in <a href="https://github.com/lfortran/lfortran/pull/98">WASM: Initial Support for Array Descriptor #98</a>,
but could not figure out a good/acceptable implementation for it.</p>
<p>Currently, as suggested by <a href="https://github.com/certik">OndÅ™ej</a>, we are trying to pass <code>array dimensions</code> explicitly as <code>function parameters</code>.
There is an <code>ASR-&gt;ASR</code> pass under implementation at <a href="">Add ASR pass for supporting passing array arguments by data pointer #87</a>,
which would hopefully/possibly transform the following</p>
<pre><code class="hljs language-python">subroutine f(a, b)
integer :: a(:,:)
real :: b(:,:,:)
end subroutine
</code></pre>
<p>into</p>
<pre><code class="hljs language-python">subroutine f(na1, na2, a, nb1, nb2, nb3, b)
integer, intent(<span class="hljs-keyword">in</span>) :: na1, na2, nb1, nb2, nb3
integer :: a(na1, na2)
real :: b(nb1, nb2, nb3)
end subroutine
</code></pre>
<p>and also update the respective <code>function</code>/<code>subroutine</code> calls as follows:</p>
<pre><code class="hljs language-python">call f(x, y)
</code></pre>
<p>to</p>
<pre><code class="hljs language-python">call f(size(x,<span class="hljs-number">1</span>), size(x, <span class="hljs-number">2</span>), x, size(y, <span class="hljs-number">1</span>), size(y, <span class="hljs-number">2</span>), size(y, <span class="hljs-number">3</span>), y)
</code></pre>
<p>This suggested approach (which looks good and beautiful) can enable the <code>wasm</code> backend
to support passing arrays (along with their dimensional information) to <code>functions</code>/<code>subroutines</code>.
I submitted a <code>PR</code> at <a href="https://github.com/lfortran/lfortran/pull/99">WASM: Supporting array passing with explicit shapes #99</a>
which supports this approach in the <code>wasm</code> backend.</p>
<p>This phase was mostly/approximately from <code>30-07-2022</code> to <code>05-08-2022</code>.</p>
<p>The MRs during this phase are as follows:</p>
<ul>
<li><a href="https://github.com/lfortran/lfortran/pull/70">WASM: Supporting Multi-Dimensional Arrays #70</a></li>
<li><a href="https://github.com/lfortran/lfortran/pull/71">CI: Support integration tests testing for WASM #71</a></li>
<li><a href="https://github.com/lfortran/lfortran/pull/98">WASM: Initial Support for Array Descriptor #98</a></li>
<li><a href="https://github.com/lfortran/lfortran/pull/99">WASM: Supporting array passing with explicit shapes #99</a></li>
</ul>
<hr>
<p>That's all for this blog. Thank you for your time. We continue this series in the next blog.</p>
</div></article></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blog":{"content":"\u003ch1 id=\"hey-there-ðŸ¤—-welcome-to-my-gsoc-journey\"\u003eHey there ðŸ¤—, Welcome to my GSoC Journey\u003c/h1\u003e\n\u003cp\u003eThis is a series of blogs that I am writing to share my amazing \u003cstrong\u003eGSoC 22\u003c/strong\u003e (Google Summer of Code 2022) Journey with you all.\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"supporting-multi-dimensional-arrays-and-wasm-testing-at-ci\"\u003eSupporting Multi-Dimensional Arrays and WASM Testing at CI\u003c/h1\u003e\n\u003cp\u003eDuring this week, I worked on adding support for \u003ccode\u003eMult-Dimensional Arrays\u003c/code\u003e in the \u003ccode\u003eWebAssembly\u003c/code\u003e Backend.\nI also worked on supporting \u003ccode\u003eintegration tests\u003c/code\u003e \u003ccode\u003etesting\u003c/code\u003e for \u003ccode\u003eWASM\u003c/code\u003e at the \u003ccode\u003eCI\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eOne of the challeges in this week was to figure out passing of the \u003ccode\u003edimensional\u003c/code\u003e information of \u003ccode\u003earrays\u003c/code\u003e\nduring \u003ccode\u003efunction\u003c/code\u003e/\u003ccode\u003esubroutine\u003c/code\u003e calls.\nIt seems, one of the possible ways to do so is to use/implement \u003ccode\u003earray descriptor\u003c/code\u003e support in the \u003ccode\u003eWebAssembly\u003c/code\u003e Backend.\nI tried supporting the \u003ccode\u003earray descriptor\u003c/code\u003e idea in \u003ca href=\"https://github.com/lfortran/lfortran/pull/98\"\u003eWASM: Initial Support for Array Descriptor #98\u003c/a\u003e,\nbut could not figure out a good/acceptable implementation for it.\u003c/p\u003e\n\u003cp\u003eCurrently, as suggested by \u003ca href=\"https://github.com/certik\"\u003eOndÅ™ej\u003c/a\u003e, we are trying to pass \u003ccode\u003earray dimensions\u003c/code\u003e explicitly as \u003ccode\u003efunction parameters\u003c/code\u003e.\nThere is an \u003ccode\u003eASR-\u0026gt;ASR\u003c/code\u003e pass under implementation at \u003ca href=\"\"\u003eAdd ASR pass for supporting passing array arguments by data pointer #87\u003c/a\u003e,\nwhich would hopefully/possibly transform the following\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esubroutine f(a, b)\ninteger :: a(:,:)\nreal :: b(:,:,:)\nend subroutine\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003einto\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003esubroutine f(na1, na2, a, nb1, nb2, nb3, b)\ninteger, intent(\u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e) :: na1, na2, nb1, nb2, nb3\ninteger :: a(na1, na2)\nreal :: b(nb1, nb2, nb3)\nend subroutine\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand also update the respective \u003ccode\u003efunction\u003c/code\u003e/\u003ccode\u003esubroutine\u003c/code\u003e calls as follows:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecall f(x, y)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eto\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-python\"\u003ecall f(size(x,\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e), size(x, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e), x, size(y, \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e), size(y, \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e), size(y, \u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e), y)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis suggested approach (which looks good and beautiful) can enable the \u003ccode\u003ewasm\u003c/code\u003e backend\nto support passing arrays (along with their dimensional information) to \u003ccode\u003efunctions\u003c/code\u003e/\u003ccode\u003esubroutines\u003c/code\u003e.\nI submitted a \u003ccode\u003ePR\u003c/code\u003e at \u003ca href=\"https://github.com/lfortran/lfortran/pull/99\"\u003eWASM: Supporting array passing with explicit shapes #99\u003c/a\u003e\nwhich supports this approach in the \u003ccode\u003ewasm\u003c/code\u003e backend.\u003c/p\u003e\n\u003cp\u003eThis phase was mostly/approximately from \u003ccode\u003e30-07-2022\u003c/code\u003e to \u003ccode\u003e05-08-2022\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThe MRs during this phase are as follows:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/lfortran/lfortran/pull/70\"\u003eWASM: Supporting Multi-Dimensional Arrays #70\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/lfortran/lfortran/pull/71\"\u003eCI: Support integration tests testing for WASM #71\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/lfortran/lfortran/pull/98\"\u003eWASM: Initial Support for Array Descriptor #98\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/lfortran/lfortran/pull/99\"\u003eWASM: Supporting array passing with explicit shapes #99\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eThat's all for this blog. Thank you for your time. We continue this series in the next blog.\u003c/p\u003e\n","frontmatter":{"slug":"gsoc_10_multi_dim_arrays_and_wasm_testing_at_ci","excerpt":"GSoC 22: Blog 10","title":"Supporting Multi-Dimensional Arrays and WASM Testing at CI","publishedAt":"2022-08-05","day":"August 5, 2022","readingTime":"2 min read"}}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"gsoc_10_multi_dim_arrays_and_wasm_testing_at_ci"},"buildId":"lE1siw_OhgDfFYiWhLfI-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>